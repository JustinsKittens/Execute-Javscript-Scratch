const ArgumentType = Scratch.ArgumentType;
const BlockType = Scratch.BlockType;
const formatMessage = Scratch.formatMessage;
const log = Scratch.log;

const menuIconURI = "data:image/png;base64,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";
const blockIconURI = "data:image/png;base64,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";

class executeJavscript{
  constructor (runtime){
    this.runtime = runtime;
    // communication related
    this.comm = runtime.ioDevices.comm;
    this.session = null;
    this.runtime.registerPeripheralExtension('executeJavscript', this);
    // session callbacks
    this.reporter = null;
    this.onmessage = this.onmessage.bind(this);
    this.onclose = this.onclose.bind(this);
    this.write = this.write.bind(this);
    // string op
    this.decoder = new TextDecoder();
    this.lineBuffer = '';
  }

  onclose (){
    this.session = null;
  }

  write (data, parser = null){
    if (this.session){
      return new Promise(resolve => {
        if (parser){
          this.reporter = {
            parser,
            resolve
          }
        }
        this.session.write(data);
      })
    }
  }

  onmessage (data){
    const dataStr = this.decoder.decode(data);
    this.lineBuffer += dataStr;
    if (this.lineBuffer.indexOf('\n') !== -1){
      const lines = this.lineBuffer.split('\n');
      this.lineBuffer = lines.pop();
      for (const l of lines){
        if (this.reporter){
          const {parser, resolve} = this.reporter;
          resolve(parser(l));
        };
      }
    }
  }

  scan (){
    this.comm.getDeviceList().then(result => {
        this.runtime.emit(this.runtime.constructor.PERIPHERAL_LIST_UPDATE, result);
    });
  }

  getInfo (){
    return {
      id: 'executeJavscript',
      name: 'Execute Javascript',
      color1: '#000000',
      color2: '#000000',
      menuIconURI: menuIconURI,
      blockIconURI: blockIconURI,
      blocks: [
        {
          opcode: 'executeJavascript',
          blockType: BlockType.COMMAND,
          arguments: {
            Code: {
              type: ArgumentType.STRING
            }
          },
          text: 'Execute Javascript [Code]'
        }
      ]
    }
  }

executeJavascript (args, util){
  const Code = args.Code;
  const do = eval(Code);
  return(do)
  return this.write(`M0 \n`);
}

}

module.exports = executeJavscript;
